<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-instana-v2/Diagnose/Simulate-Failure">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">3. TroubleShoot an Issue | IBM TechXchange Instana Labs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://github.com/instana-techxchange/labs/instana-v2/Diagnose/Simulate-Failure/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="3. TroubleShoot an Issue | IBM TechXchange Instana Labs"><meta data-rh="true" name="description" content="Diagnosing Issues in Instana"><meta data-rh="true" property="og:description" content="Diagnosing Issues in Instana"><link data-rh="true" rel="icon" href="/instana-techxchange/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://github.com/instana-techxchange/labs/instana-v2/Diagnose/Simulate-Failure/"><link data-rh="true" rel="alternate" href="https://github.com/instana-techxchange/labs/instana-v2/Diagnose/Simulate-Failure/" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/instana-techxchange/labs/instana-v2/Diagnose/Simulate-Failure/" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7WTTHT6SEH"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7WTTHT6SEH",{anonymize_ip:!0})</script><link rel="stylesheet" href="/instana-techxchange/assets/css/styles.031e323a.css">
<link rel="preload" href="/instana-techxchange/assets/js/runtime~main.081d3363.js" as="script">
<link rel="preload" href="/instana-techxchange/assets/js/main.e9ef6918.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/instana-techxchange/"><div class="navbar__logo"><img src="/instana-techxchange/img/ibm-watson-logo.png" alt="Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/instana-techxchange/img/ibm-watson-logo.png" alt="Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">IBM TechXchange</b></a><a class="navbar__item navbar__link" href="/instana-techxchange/labs/general/">Labs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/IBM/instana-techxchange" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/instana-techxchange/labs/jam-in-a-box/">Jam-in-a-Box</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/instana-techxchange/labs/general/">General</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/instana-techxchange/labs/instana-v2/introduction/">Instana Labs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/instana-techxchange/labs/instana-v2/introduction/">Labs Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/instana-techxchange/labs/instana-v2/server-and-agent-install-lab/introduction/">Server &amp; Agent Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/instana-techxchange/labs/instana-v2/applications-and-ibm-middleware/introduction/">Applications &amp; IBM Middleware</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/instana-techxchange/labs/instana-v2/explore-instana/introduction/">Explore Instana</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/instana-techxchange/labs/instana-v2/administer-instana/introduction/">Administer Instana</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/instana-techxchange/labs/instana-v2/synthetic-pop/">Synthetic Monitoring</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/instana-techxchange/labs/instana-v2/opentelemetry/agent-installation/">OpenTelemetry</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/instana-techxchange/labs/instana-v2/Diagnose/Introduction/">Diagnose</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/instana-techxchange/labs/instana-v2/Diagnose/Introduction/">1. Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/instana-techxchange/labs/instana-v2/Diagnose/lab-environment/">2. Lab Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/instana-techxchange/labs/instana-v2/Diagnose/Simulate-Failure/">3. TroubleShoot an Issue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/instana-techxchange/labs/instana-v2/Diagnose/end-user-monitoring/">4. End-User monitoring</a></li></ul></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/instana-techxchange/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Instana Labs</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Diagnose</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">3. TroubleShoot an Issue</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Troubleshoot an issue</h1><hr><h2></h2><p>In this section of the lab, you will learn how Instana can help you get to root cause of a problem in a quick and intuitive manner.</p><p>In order for the events to show as incident, you have to create a <strong>smart alert</strong> which are already created in the <strong>&quot;Quote of the day&quot;</strong> application. </p><p>On the left side, select <strong>“Applications”</strong> and then click on the <strong>&quot;Quote of the day&quot;</strong> link. </p><p><img loading="lazy" alt="applications" src="/instana-techxchange/assets/images/applications-4220c096c15a00b11ca2c06e8068ad2b.png" width="1588" height="812" class="img_ev3q"></p><p>In the <strong>&quot;Quote of the day&quot;</strong> dashboard, click on the <strong>smart alert</strong> tab as shown in the below image - step 1
Then click the  <strong>&quot;QOTD High Erroneous Call Rate&quot;</strong>  as shown in step 2</p><p><img loading="lazy" alt="smartAlert" src="/instana-techxchange/assets/images/smartalerts1-689810dafd890183de3473ccc8787aee.png" width="1873" height="545" class="img_ev3q"></p><p>Click the Edit icon as shown in the below image. </p><p><img loading="lazy" alt="selectErroneous" src="/instana-techxchange/assets/images/smartalerts2-c625a1f23e21d8135e86ca50848de81a.png" width="1766" height="418" class="img_ev3q"></p><p>Explore the smart alert options on the right side.
<strong>DO NOT Change any settings</strong> This step in the lab is  only for viewing and understanding.</p><p><img loading="lazy" alt="selectErroneous" src="/instana-techxchange/assets/images/smartalerts3-8f29a11c7d55b290edf6667e38716d2b.png" width="1747" height="659" class="img_ev3q"></p><p>Select  &quot;Scope&quot; and explore each from the list and at the end cancel if any changes were made to this section. </p><p> <strong> Note </strong>
The scope of a Smart Alert in Instana is the application perspective from which the alert is created.
The user can configure the scope of where to apply checks, such as a URL or service name.
The application perspective is selected by default as the initial scope.
The user can filter the overall calls to a subset by using the query language. </p><p><img loading="lazy" alt="selectErroneous" src="/instana-techxchange/assets/images/smart_alerts_scope-444ec0ec53da894b743e151cc9c51ec3.png" width="1781" height="664" class="img_ev3q"></p><p>For further details on the Smart Alert creation and details referr to the other lab
<a href="https://ibm.github.io/instana-techxchange/labs/instana-v2/administer-instana/administer/#32-create-an-analytics-based-smart-alert" target="_blank" rel="noopener noreferrer">https://ibm.github.io/instana-techxchange/labs/instana-v2/administer-instana/administer/#32-create-an-analytics-based-smart-alert</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="evaluate-the-events-via-an-incident">Evaluate the Events via an Incident<a href="#evaluate-the-events-via-an-incident" class="hash-link" aria-label="Direct link to Evaluate the Events via an Incident" title="Direct link to Evaluate the Events via an Incident">​</a></h2><p><strong> The problmes are generated / simulated  in the lab environment once per hour. Therefore you need to change the time interval to &quot;Last Hour&quot; or greater  to view the problems/ incidents triggered by the smart alert setup  </strong></p><p>On the left side, select <strong>“Events”</strong></p><p>Make sure that the time selection in the upper right corner is set to <strong>“Last hour”</strong> as shown in the picture below.</p><p><img loading="lazy" alt="lasthour" src="/instana-techxchange/assets/images/lasthour-138cf85c15080473f1c187af574f283e.png" width="1788" height="604" class="img_ev3q"></p><p>This will open up a panel showing all of the Incidents that are affecting the monitored systems and applications. Incidents are the raw Events that have been correlated via Analytics into an Incident.
<img loading="lazy" alt="events" src="/instana-techxchange/assets/images/erroneousBK1-79585b594959d12366e01def9e264f55.png" width="1859" height="712" class="img_ev3q"></p><p>As seen in the above picture, select the Incident that is triggering on the <strong>“QOTD Calls are slower than normal”</strong>  It indicates that there are large numbers of calls slower than usual.</p><p>You will see the details related to raw Events that were correlated via analytics into an Incident.</p><p> An incident indicates that a critical infrastructure issue or a KPI breach has occurred.
An incident can indicate that a user experience or service is degraded or will be degraded soon. Instana can correlate related issues and changes to an incident to help with root cause analysis.</p><p> An issue is an event that occurs when an application, service, or part of it becomes unhealthy.
Instana has hundreds of health signatures that can detect problems such as service quality degradation, complex infrastructure issues, and disk saturation</p><p><img loading="lazy" alt="incident" src="/instana-techxchange/assets/images/incident1-dd19e6035466b5d921eb0be9357179fb.png" width="1831" height="719" class="img_ev3q">
<img loading="lazy" alt="incident" src="/instana-techxchange/assets/images/incident2-e6660de76eca6a24033f9106e52fc72b.png" width="1833" height="726" class="img_ev3q"></p><p>In this case, you should see the Triggering Event and a few Related Events. The Triggering Event is the first event that starts to impact a service or a website. The Related Events are events that Instana determined are related by leveraging analytics including the relationships that exist between the various entities, services, and endpoints.
With Instana analytics in action, you see 7 issues corelated to 1 incident to (A) Reduce noise, (B) Provide the user with additional context.
The issues listed in the above example shows the  the incident consists of issues from different components of that service.</p><p>Within the Incident, you can see when the Incident opened and in some cases, when it closed. And, you can see the Incident Timeline. This is the time when each event opened and closed. If the event is still open, it will be color coded with the event severity.</p><p>On the right side, click on the <strong>”+”</strong> symbol to expand the Triggering Event.</p><p>You can see in the historical graph that there are periods of time where erroneous (failed) calls are high.</p><p><img loading="lazy" alt="evenErroneous" src="/instana-techxchange/assets/images/triggeringevent1-f691b15ac0c67c3eb48345beee5a14b8.png" width="1504" height="612" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="analyze-the-calls">Analyze the Calls<a href="#analyze-the-calls" class="hash-link" aria-label="Direct link to Analyze the Calls" title="Direct link to Analyze the Calls">​</a></h2><p>Next, click on the <strong>”+”</strong> symbol to expand the event for a specific event like “Erroneous call rate is too high on QM1@infra” typically the <strong>First Related Events (X)</strong> and then click on the <strong>“Analyze Calls”</strong> button to analyze the calls.</p><p><img loading="lazy" alt="Analyze Calls" src="/instana-techxchange/assets/images/analyzecalls-3327deb28b914367c38fbdabda0a7ee8.png" width="1828" height="709" class="img_ev3q"></p><p>You will be taken to an analytics screen where you can see all of the failed calls for the endpoint <strong>“CP4I.DEMO.API.Q”</strong>.
The ACE flow is putting a message on the CP4I.DEMO.API.Q queue and that is being invistigated further.</p><p>  IBM App Connect Enterprise (ACE) is a cloud-based data integration platform.
It allows businesses to connect applications and data across their business systems.
ACE can connect any application or service over multiple protocols, including SOAP, HTTP, and JMS.</p><p><img loading="lazy" alt="Select call" src="/instana-techxchange/assets/images/selectCall-68a89a252ee668d42c48025f81f34bf7.png" width="1874" height="722" class="img_ev3q"></p><p> After clicking on the <strong>”expand”</strong> symbol, You can also see the list erroneous calls.</p><p><img loading="lazy" alt="each call" src="/instana-techxchange/assets/images/eachcall-ea5c344b76cc9e6d03758f8fb282beaa.png" width="1857" height="724" class="img_ev3q"></p><p>Select one of the failing <strong>“PUT CP4I.DEMO.API.Q”</strong> calls</p><p>We are investigating one of the ACE calls here.
Here you will see the User information of the session and other metadata. on the Right side you will see the detials of the failed call.
Scroll down to the Timeline section. </p><p><img loading="lazy" alt="Bad Call" src="/instana-techxchange/assets/images/badCall-fb7a5d012c52267add718acec002eb29.png" width="1870" height="711" class="img_ev3q">
<img loading="lazy" alt="Bad Call1" src="/instana-techxchange/assets/images/badCall1-852b5b085bd6202cadada66058d2aea3.png" width="1507" height="667" class="img_ev3q"></p><p>Scroll to the bottom of the page where you see the <strong>“Calls”</strong>. This shows you the timeline of the calls for this single transaction.</p><p>You’ll notice that there are plus signs. Click on the plus signs to expand the call stack.</p><p><img loading="lazy" alt="Call Stack" src="/instana-techxchange/assets/images/callStack-480ec9dc934499635c9fc28d86a9d1b6.png" width="995" height="655" class="img_ev3q"></p><p>When you select the <strong>msgFlowTra.</strong> call, the right side of the screen gets updated with context for that call.
The context provides the tags, Error Codes from IBM ACE and the actual error message for this failed call.</p><p><img loading="lazy" alt="Msg Flow" src="/instana-techxchange/assets/images/msgFlow-8edf8ad74747bea5a6231b26d9ed3bcf.png" width="1442" height="514" class="img_ev3q"></p><p>When you see errors, normally you go to the bottom of the call stack. That’s because the error in the last call is likely affecting the upstream calls.</p><p>Click on the last call and examine the information on the right side. You will see the following error message: “IBM MQ call failed with compcode ‘2’ (‘MQCC_FAILED’) reason ‘2053’ (‘MQRC_Q_FULL’)”
One can look up google or IBM documentatons for this Error code &quot;MQ Erors code 2053&quot;  which indicates that &quot;MQ error code 2053 (MQRC_Q_FULL) means that a command or call failed because the queue is full. The queue is full because it already contains the maximum number of messages possible, as specified by the MaxQDepth queue attribute&quot;</p><p>!<img loading="lazy" alt="Call Stack Expand" src="/instana-techxchange/assets/images/callStackExpand-7e7cf61a486372d4a169fb03052334b2.png" width="1494" height="637" class="img_ev3q"></p><p>In your spare time, you can click on other types of transactions in the Call Stack, but for now, let’s focus on the diagnostic scenario.</p><p>This error message indicates that the MQ Queue is full and new messages can’t be put on the queue.</p><p>At this point, we believe we have a diagnosis for our problem. The MQ Queue is full and the transactions are failing because they can’t post a message to the queue.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="confirm-your-diagnosis">Confirm Your Diagnosis<a href="#confirm-your-diagnosis" class="hash-link" aria-label="Direct link to Confirm Your Diagnosis" title="Direct link to Confirm Your Diagnosis">​</a></h2><p>In many cases, you can confirm the root cause of the problem by analyzing the call stack and stack trace, but sometimes you need to investigate further.</p><p>In this case, you may want to examine the queue that is causing this error. Or, you may want to confirm whether the problem has been resolved.</p><p>Instana automatically puts a link to the queue in the lower right corner. For other technologies, there are similar links.</p><p>Scroll all the way to the bottom on the right side of the screen. You’ll see that there is a link that will link to the MQ Queue named CP4I.DEMO.API.Q. This is the queue that is being used for this application transaction.</p><p><img loading="lazy" alt="Queue Link" src="/instana-techxchange/assets/images/queueLink-07a5fe0156b9ad9b613874d7dc0e1e84.png" width="1493" height="652" class="img_ev3q"></p><p>Click on the link to navigate to the queue details.</p><p><img loading="lazy" alt="Queue Details" src="/instana-techxchange/assets/images/queueDetails-debfa02675d46a7c8c559d2bca0a8a2c.png" width="1880" height="749" class="img_ev3q"></p><p>On this screen, you’ll notice a few important things.</p><ul><li>In the upper right corner, you’ll notice that the time range is specifically set to the timeframe when the Incident was open. <strong>(1)</strong></li><li>The queue depth reached 100% <strong>(2)</strong></li><li>The Messages In rate is zero during the timeframe that the queue is full. <strong>(3)</strong></li></ul><p>Clearly there is a problem with this queue. The queue is full and transactions won’t work properly because new messages can’t be placed on the queue. We need to resolve the queue depth problem in order to fix the application.</p><p>From here, if you wanted to investigate further, you could use the <strong>bread crumbs</strong> at the top of the screen or the Stack to navigate to the related resources. For example, examine the <strong>IBM MQ Queue Manager</strong>.</p><p><img loading="lazy" alt="stack" src="/instana-techxchange/assets/images/stack-b137938dc6967644cc56ef3a07d6c807.png" width="907" height="562" class="img_ev3q"></p><p>That completes this section of the lab.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="optional---simulate-failures-manually-and-troubleshoot-ratings-endpoint-service-failures">Optional - Simulate failures manually and troubleshoot &quot;Ratings Endpoint Service Failures&quot;<a href="#optional---simulate-failures-manually-and-troubleshoot-ratings-endpoint-service-failures" class="hash-link" aria-label="Direct link to Optional - Simulate failures manually and troubleshoot &quot;Ratings Endpoint Service Failures&quot;" title="Direct link to Optional - Simulate failures manually and troubleshoot &quot;Ratings Endpoint Service Failures&quot;">​</a></h2><p>We are going to simulate the following (Ratings Endpoint Failures) failures in the system using Anomaly Generator running at <a href="http://10.100.1.60:32001" target="_blank" rel="noopener noreferrer">http://10.100.1.60:32001</a>
Please visit the URL: <a href="http://10.100.1.60:32001" target="_blank" rel="noopener noreferrer">http://10.100.1.60:32001</a> or navigate to the tab(bookmarked) which was already opened in your firefox browser.</p><p>Click on Rating Service Failures as shown below.</p><p><img loading="lazy" alt="Click_on_Ratings_Endpoint_Failures" src="/instana-techxchange/assets/images/click_on_ratings_service_failures-5048f3f3e1d5a8ce7144a336c2d94ca0.png" width="1153" height="638" class="img_ev3q"></p><p>Now Click on &quot;Start&quot; whenever you are ready to inject the following failures as shown below in the picture.</p><p><img loading="lazy" alt="Click_on_Start" src="/instana-techxchange/assets/images/Click_on_Start-80b7f351be359583cf661a65787cc85d.png" width="1181" height="727" class="img_ev3q"></p><p>Now the system will take time to simulate the failures. Please give atleast 3-5 minutes for the system to simulate the failures.</p><p>All of these failures will be in the qotd-rating service. There are going to be 6 failure scenarios in the qotd-rating service.</p><ol><li>Rating service failing with 500/404 errors half of the time.</li><li>Increase memory usage</li><li>Increase cpu usage </li><li>Increase latency in primary GET /ratings/:id to 0.9 seconds</li><li>Start new independent log - unknown code every 4 seconds in quote service</li><li>Start new dependent logger on /ratings/:id endpoint.</li></ol><p>Our troubleshooting can start with looking at the qotd-rating service in Applications. Please set the time duration to the last 10 minutes and go to Ratings service in Applications view.</p><p>Our goal is to show you the steps to troubleshoot this scenario. Please click on Applications as shown in the picture below. </p><p><img loading="lazy" alt="Click_On_Applications1" src="/instana-techxchange/assets/images/Click_On_Applications1-7591b15eafd3591fef8f43d325b71fb8.png" width="1872" height="638" class="img_ev3q"></p><p>Please click on qotd-rating application as shown in the picture below. </p><p><img loading="lazy" alt="Click_on_qotd_rating" src="/instana-techxchange/assets/images/Click_on_qotd_rating-d57f60d2437e6998b0e1947c569c3152.png" width="1891" height="595" class="img_ev3q"></p><p>Now surface only the 4XX and 5XX errors by clicking/de-selecting on 1XX, 2XX, 3XX from these services as shown in the picture below.</p><p><img loading="lazy" alt="4XX_5XX_response_codes" src="/instana-techxchange/assets/images/4XX_5XX_response_codes-695d819d1f194e7782f64db8cdd11b3c.png" width="1893" height="626" class="img_ev3q"></p><p>Now try to drag and drop into the time period (Highlight a specified area in the graph) as shown in the below picture and select &quot;Zoom to time range&quot; where the errors were being produced and the time period on the top right corner will get changed on its own from 10 minutes to the highlighted time period as shown below. We are trying go back in time to see the errors. </p><p><img loading="lazy" alt="Drag_drop_erroneous_spikes" src="/instana-techxchange/assets/images/Drag_drop_erroneous_spikes-ea9531f907762cc1587f92a35a4ba7af.png" width="1670" height="660" class="img_ev3q"></p><p>Now look at qotd-rating application and verify all the simulated failure conditions based on the information we see in the graphs. For example: we can see the latency spike to 2.15 seconds as shown in below pictures. This proves Condition 2 in the failures section. You can see this from the picture below. </p><p><img loading="lazy" alt="Validating_failures_part2" src="/instana-techxchange/assets/images/Validating_failures_part1-1f03a8f5674ae9a6a90b762d076a380d.png" width="1891" height="628" class="img_ev3q">
<img loading="lazy" alt="Validating_failures_part2" src="/instana-techxchange/assets/images/Validating_failures_part2-3c169590eae145bfb6c39e169ec88ce2.png" width="1896" height="669" class="img_ev3q"></p><p>Click back browser button to return  to to previous summary section.
Now explore all the end points getting errors as shown in the picture below which satisfies Condition 1.
<img loading="lazy" alt="Validating_failures_part2" src="/instana-techxchange/assets/images/Validating_failures_part3-4f3ba6902ebd50f2c2434a7932f88a1a.png" width="1891" height="644" class="img_ev3q"></p><p>Next, we will analyze all the failures in the qotd-rating service by clicking &quot;Analyze Calls&quot; as shown in the picture below.</p><p><img loading="lazy" alt="GET_Ratings" src="/instana-techxchange/assets/images/GET_Ratings-83a9635fa0351a3234ef423096c0dca0.png" width="1883" height="668" class="img_ev3q"></p><p>In this Analytics screen you can see that we are automatically looking at qotd-rating service and trying to expose only the 4XX and 5XX response codes as shown in the picture below.</p><p><img loading="lazy" alt="4XX_5XX_Analytics" src="/instana-techxchange/assets/images/4XX_5XX_Analytics-ee22728d9eff4f4930d863a488cd11ab.png" width="1883" height="633" class="img_ev3q"></p><p>Next, select the top group which has the most 4XX and 5XX errors. Notice you did not have to type any SQL query to get to this result since Instana automatically knows the context of your troubleshooting scenario.
By default the list is sorted by # of calls high to low and Instana also allows to sort by other options as shown below.</p><p><img loading="lazy" alt="sort_options" src="/instana-techxchange/assets/images/sort_options-ce6c0be5a76243f475195fbb01682478.png" width="1819" height="346" class="img_ev3q"></p><p><img loading="lazy" alt="Select_Group" src="/instana-techxchange/assets/images/Select_Group-f89b75d74a21965c5c2cc731a2f591df.png" width="1872" height="647" class="img_ev3q"></p><p>Now there is a list of all the traces with 4XX and 5XX response codes and select any one of them to see what is going on inside our code.</p><p><img loading="lazy" alt="select_red_color" src="/instana-techxchange/assets/images/select_red_color-8b0dea8d369f04fb3a48a11aa1de7303.png" width="1889" height="651" class="img_ev3q"></p><p>Note - There are 2 Scroll bar sections to n this page as shown in the picture below.
<img loading="lazy" alt="select_red_color" src="/instana-techxchange/assets/images/2scrollbars-106c8aa4d26f5c03c1c6fb5b68c92d49.png" width="1908" height="671" class="img_ev3q"></p><p>As you scroll down both sections, You can see the 500 response code and Log messages below along with the stack trace which will tell you the exact code with the line number responsible for the problem as shown in below 3 pictures for this particular 500 error.</p><p><img loading="lazy" alt="STACK_TRACE_Error_Logs" src="/instana-techxchange/assets/images/STACK_TRACE_Error_Logs_1-cdc920a3e22971bda52895108b83cbd7.png" width="1870" height="651" class="img_ev3q">
<img loading="lazy" alt="STACK_TRACE_Error_Logs" src="/instana-techxchange/assets/images/STACK_TRACE_Error_Logs_2-e93194e3631c53e3138f3c078f69ad6f.png" width="1857" height="724" class="img_ev3q"></p><p>Lastly you can see the log message which the simulation injected.
<img loading="lazy" alt="STACK_TRACE_Error_Logs" src="/instana-techxchange/assets/images/STACK_TRACE_Error_Logs_3-414d8da56e62c75f19b27f529b304a13.png" width="1892" height="647" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2><p>In this lab, you learned how to diagnose a problem in Instana, determining that the queue was full and preventing transactions from completing.</p><p>Also successfully in this lab, you learnt how to successfully troubleshoot some other common issues by simulating failures.</p><p>Continue to next Lab of <strong>&quot;End User Monitoring(EUM) / Real-User Monitoring(RUM)&quot;</strong></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/IBM/instana-techxchange/tree/main/labs/instana-v2/Diagnose/Simulate-Failure.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/instana-techxchange/labs/instana-v2/Diagnose/lab-environment/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">2. Lab Environment</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/instana-techxchange/labs/instana-v2/Diagnose/end-user-monitoring/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">4. End-User monitoring</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#evaluate-the-events-via-an-incident" class="table-of-contents__link toc-highlight">Evaluate the Events via an Incident</a></li><li><a href="#analyze-the-calls" class="table-of-contents__link toc-highlight">Analyze the Calls</a></li><li><a href="#confirm-your-diagnosis" class="table-of-contents__link toc-highlight">Confirm Your Diagnosis</a></li><li><a href="#optional---simulate-failures-manually-and-troubleshoot-ratings-endpoint-service-failures" class="table-of-contents__link toc-highlight">Optional - Simulate failures manually and troubleshoot &quot;Ratings Endpoint Service Failures&quot;</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/docs/en/obi/current" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instana<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/au-en" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/instana-techxchange/assets/js/runtime~main.081d3363.js"></script>
<script src="/instana-techxchange/assets/js/main.e9ef6918.js"></script>
</body>
</html>