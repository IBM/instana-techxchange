<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-instana-v2/administer-instana/administer-with-API/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">4. Administer Instana with API | IBM TechXchange Instana Labs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://github.com/instana-techxchange/labs/instana-v2/administer-instana/administer-with-API/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="4. Administer Instana with API | IBM TechXchange Instana Labs"><meta data-rh="true" name="description" content="Perform Administrative Functions with Instana using API&#x27;s"><meta data-rh="true" property="og:description" content="Perform Administrative Functions with Instana using API&#x27;s"><link data-rh="true" rel="icon" href="/instana-techxchange/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://github.com/instana-techxchange/labs/instana-v2/administer-instana/administer-with-API/"><link data-rh="true" rel="alternate" href="https://github.com/instana-techxchange/labs/instana-v2/administer-instana/administer-with-API/" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/instana-techxchange/labs/instana-v2/administer-instana/administer-with-API/" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7WTTHT6SEH"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7WTTHT6SEH",{anonymize_ip:!0})</script><link rel="stylesheet" href="/instana-techxchange/assets/css/styles.031e323a.css">
<link rel="preload" href="/instana-techxchange/assets/js/runtime~main.3fad31ff.js" as="script">
<link rel="preload" href="/instana-techxchange/assets/js/main.df168817.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/instana-techxchange/"><div class="navbar__logo"><img src="/instana-techxchange/img/ibm-watson-logo.png" alt="Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/instana-techxchange/img/ibm-watson-logo.png" alt="Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">IBM TechXchange</b></a><a class="navbar__item navbar__link" href="/instana-techxchange/labs/general/">Labs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/IBM/instana-techxchange" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/instana-techxchange/labs/jam-in-a-box/">Jam-in-a-Box</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/instana-techxchange/labs/general/">General</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/instana-techxchange/labs/instana-v2/introduction/">Instana Labs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/instana-techxchange/labs/instana-v2/introduction/">Labs Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/instana-techxchange/labs/instana-v2/server-and-agent-install-lab/introduction/">Server &amp; Agent Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/instana-techxchange/labs/instana-v2/applications-and-ibm-middleware/introduction/">Applications &amp; IBM Middleware</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/instana-techxchange/labs/instana-v2/explore-instana/introduction/">Explore Instana</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/instana-techxchange/labs/instana-v2/administer-instana/administer/">Administer Instana</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/instana-techxchange/labs/instana-v2/administer-instana/administer/">3. Administer Instana</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/instana-techxchange/labs/instana-v2/administer-instana/administer-with-API/">4. Administer Instana with API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/instana-techxchange/labs/instana-v2/administer-instana/quiz/">Quiz</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/instana-techxchange/labs/instana-v2/synthetic-pop/introduction/">Synthetic Monitoring</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/instana-techxchange/labs/instana-v2/opentelemetry/introduction/">OpenTelemetry</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/instana-techxchange/labs/instana-v2/Diagnose/Introduction/">Diagnose</a></div></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/instana-techxchange/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Instana Labs</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Administer Instana</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">4. Administer Instana with API</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Administer Instana with API&#x27;s</h1><p>In this section of the lab we will create an Personal API Token that will be used for executing the Instana Rest API calls. The Instana web REST API allows for retrieval of data such as traces and metrics, as well as configuration, such as service extraction and user management.</p><p>From the Student host open the Firefox browser and select the <strong>Instana</strong>
bookmark.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>If you are unsure how to get access to the Student host see
<a href="/instana-techxchange/labs/jam-in-a-box/#accessing-a-lab-environment">Accessing a Lab Environment</a></p></div></div><p><img loading="lazy" alt="open firefox" src="/instana-techxchange/assets/images/open-firefox-0a80d4638a24f8ad7a63f5184fbfa7b1.png" width="1251" height="842" class="img_ev3q"></p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>You can safely ignore the warning about the certificate being untrusted.</p><p><img loading="lazy" alt="untrusted-cert-advance" src="/instana-techxchange/assets/images/untrusted-cert-advance-954725e84d2839590377564af68c9d4c.png" width="2186" height="1460" class="img_ev3q"></p></div></div><p>When prompted, enter the username and password from the credentials file.</p><p><img loading="lazy" src="/instana-techxchange/assets/images/login-4bfbf5fd724af14ce335dc516c1e7736.png" width="498" height="463" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="41-create-an-instana-api-token">4.1: Create an Instana API Token<a href="#41-create-an-instana-api-token" class="hash-link" aria-label="Direct link to 4.1: Create an Instana API Token" title="Direct link to 4.1: Create an Instana API Token">​</a></h2><p>In this section of the lab we will create an Personal API Token that will be used for executing the Instana Rest API calls. Personal tokens can be created Settings &gt; User settings &gt; Personal API tokens and only require a name to be set. This token &quot;inherits&quot; the permission of the creating user. </p><ol><li>Select <strong>Settings</strong> on the left menu</li></ol><blockquote><blockquote><blockquote><p><img loading="lazy" src="/instana-techxchange/assets/images/api_1-4e8075d5ab1d7579abe13c68b0c06f6c.png" width="558" height="1168" class="img_ev3q"></p></blockquote></blockquote></blockquote><ol start="2"><li>Select API Tokens menu item in <strong>ACCESS CONTROL</strong> and Select <strong>Add API Token</strong> on the right to add a new toekn</li></ol><blockquote><blockquote><blockquote><p><img loading="lazy" src="/instana-techxchange/assets/images/api_2-74e2279b4f92412c0795266b95736076.png" width="3342" height="980" class="img_ev3q"></p></blockquote></blockquote></blockquote><ol start="3"><li>Enter a name for the token, for example <strong>RestAPILab</strong></li></ol><blockquote><blockquote><blockquote><p><img loading="lazy" src="/instana-techxchange/assets/images/api_3-075cfa2435aad05a3f8bb61362ba3882.png" width="1711" height="586" class="img_ev3q"></p></blockquote></blockquote></blockquote><ol start="4"><li>the following set of <strong>Permissions</strong> are required for executing the API&#x27;s in this lab.</li></ol><blockquote><blockquote><blockquote><p>Configuration of applications <br>
Service &amp; endpoint mapping <br>
Configuration of Alert Channels <br>
Configuration of Events, Alerts and Smart Alerts for APs and websites <br>
Configuration of global Smart Alerts <br></p></blockquote></blockquote></blockquote><blockquote><blockquote><blockquote><p><img loading="lazy" src="/instana-techxchange/assets/images/api_4-c7543fe50a769096c23bb9df079b1068.png" width="1619" height="762" class="img_ev3q"></p></blockquote></blockquote></blockquote><ol><li>Select the <strong>Save</strong> button at the bottom of the page to save the API Token</li></ol><blockquote><blockquote><blockquote><p><img loading="lazy" src="/instana-techxchange/assets/images/api_5-1aa27b598f5f937c2acc5e1a4f99a0d1.png" width="1758" height="888" class="img_ev3q"></p></blockquote></blockquote></blockquote><ol start="6"><li>Select the token to copy it to the clipboard. The Token will be used in the subsequent section of the lab to execute the API&#x27;s </li></ol><blockquote><blockquote><blockquote><p><img loading="lazy" src="/instana-techxchange/assets/images/api_6-95c010368e48a2d4544319d5ff31c1a4.png" width="1609" height="472" class="img_ev3q"></p></blockquote></blockquote></blockquote><ol start="7"><li><p>Create a <strong>host</strong> and <strong>apiToken</strong> environment variables on the bastion host</p><ol><li>Open the Terminal window on the Bastion host by selecting the Terminal icon on the desktop</li></ol><p><img loading="lazy" src="/instana-techxchange/assets/images/open-terminal-bc1fce2e86f8d713aee6c96887b44dfa.png" width="976" height="639" class="img_ev3q"></p><ol start="2"><li><p>Copy and paste the follwoign export commands to the terminal window</p><p>  export host=dev-aiops.apps.ocp.ibm.edu  <br>
export apiToken=&lt;Token from step #6&gt;</p><p><img loading="lazy" src="/instana-techxchange/assets/images/export_tokens-689994de2f642ab390d47f6d5d3a8740.png" width="735" height="186" class="img_ev3q"></p></li></ol></li></ol><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>To copy and paste from the lab guide to the bastion host window, use the Insert Text icon at the top of the window. You will be using this method to Copy and Paste Curl commands from the documentation to the Terminal window in the bastion host.</p><p><img loading="lazy" src="/instana-techxchange/assets/images/copy-and-paste-e31e3c69d5bd5b3f5b8868d8d1bcdc16.png" width="582" height="257" class="img_ev3q"></p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="42-application-metrics">4.2: Application Metrics<a href="#42-application-metrics" class="hash-link" aria-label="Direct link to 4.2: Application Metrics" title="Direct link to 4.2: Application Metrics">​</a></h2><p>The Application Metrics API calls will be run in the terminal Window. To Run the Curl commands, copy and paste the request curl command to the Terminal window.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="list-all-applications">List all applications<a href="#list-all-applications" class="hash-link" aria-label="Direct link to List all applications" title="Direct link to List all applications">​</a></h3><p>Request:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> curl -k --silent -X GET -H </span><span class="token string" style="color:#e3116c">&quot;authorization: apiToken $apiToken&quot;</span><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;https://$host/api/application-monitoring/applications?pretty&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Response </p><p><img loading="lazy" src="/instana-techxchange/assets/images/applications_api_response-a780e949a4740d733a4b1d6ce28e5958.png" width="1515" height="703" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="list-applications-with-errors">List applications with errors<a href="#list-applications-with-errors" class="hash-link" aria-label="Direct link to List applications with errors" title="Direct link to List applications with errors">​</a></h3><p>The request will list all applications monitored by the Instana agent that are throwing http 5xx errors. The <strong>metric</strong> attribute in the request object can be changed to http.4xx or http.3xx as needed.</p><p>Request:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> curl -k -X POST  -H </span><span class="token string" style="color:#e3116c">&quot;Accept: application/json&quot;</span><span class="token plain"> -H </span><span class="token string" style="color:#e3116c">&quot;Content-Type: application/json&quot;</span><span class="token plain"> -H </span><span class="token string" style="color:#e3116c">&quot;Authorization: apiToken $apiToken&quot;</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;https://$host/api/application-monitoring/metrics/applications?pretty&quot;</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d &#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;applicationBoundaryScope&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ALL&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;label&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Robot-Shop&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;metrics&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;aggregation&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;SUM&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;granularity&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;metric&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http.5xx&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Response:</p><p><img loading="lazy" src="/instana-techxchange/assets/images/500_error_response-704e01a43979d342db730d928534a1ad.png" width="702" height="699" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-application-services-by-an-application-name">Query application services by an application name<a href="#query-application-services-by-an-application-name" class="hash-link" aria-label="Direct link to Query application services by an application name" title="Direct link to Query application services by an application name">​</a></h3><p>The request will list all applications monitored by the Instana agent that are throwing http 5xx errors. The nameFilter attribute in the request can be changed to the <strong>qotd</strong> applciaiton.</p><p>Request:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -k --silent -X GET -H </span><span class="token string" style="color:#e3116c">&quot;authorization: apiToken $apiToken&quot;</span><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;https://$host/api/application-monitoring/applications/services?pretty&quot;</span><span class="token plain"> -d &#x27;nameFilter=Robot-Shop&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Response:</p><p><img loading="lazy" src="/instana-techxchange/assets/images/services_api_response-dd7699d4f297a99f919895f3703dcd56.png" width="1765" height="823" class="img_ev3q"></p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Note, the screenshot does not list the complete set of services and the data may look different in your environment.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="43-infrastructure-level-metrics">4.3: Infrastructure-level metrics<a href="#43-infrastructure-level-metrics" class="hash-link" aria-label="Direct link to 4.3: Infrastructure-level metrics" title="Direct link to 4.3: Infrastructure-level metrics">​</a></h2><p>In this section we will use the Instana applciation interface to help build the API calls required to fetch Infrastucture information and correlate it to an Applciation. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="list-hosts-monitoried-by-instana">List hosts monitoried by Instana<a href="#list-hosts-monitoried-by-instana" class="hash-link" aria-label="Direct link to List hosts monitoried by Instana" title="Direct link to List hosts monitoried by Instana">​</a></h3><ol><li>From the Instana applciation, Select the Analytics icon</li></ol><p>  <img loading="lazy" src="/instana-techxchange/assets/images/analytics-2048887dda69ec125bbbb6693b1e7a90.png" width="1290" height="709" class="img_ev3q"></p><ol start="2"><li>Select Infrastructure from the drop-down menu</li></ol><p><img loading="lazy" src="/instana-techxchange/assets/images/infrastructure-810dbbf2eaa268caaa0269ae8a24a316.png" width="1302" height="627" class="img_ev3q"></p><ol start="3"><li>In the search field, enter <strong>Host</strong> to filter the results and select the <strong>Host</strong> Entity Type</li></ol><p><img loading="lazy" src="/instana-techxchange/assets/images/host_filter-80e81ccab1ff5c749a6f20f4ed492dd2.png" width="1790" height="341" class="img_ev3q"></p><ol start="4"><li>Select the API query option on the left to view the API curl command</li></ol><p><img loading="lazy" src="/instana-techxchange/assets/images/select_api_query-56f457e17daeeae5f65c8ad987acaf66.png" width="1794" height="567" class="img_ev3q"></p><ol start="5"><li>We will use a Text Editor to make minor updates to the API query before we run it on the Terminal window. To open the text editor, select the Activities icon on the left and Type Text Editor in the searcd box</li></ol><p><img loading="lazy" src="/instana-techxchange/assets/images/activities-9ea329ce5844d5a52fced933b6d3196f.png" width="1348" height="263" class="img_ev3q"></p><ol start="6"><li>Copy the curl command from the API query</li></ol><p><img loading="lazy" src="/instana-techxchange/assets/images/select_api_query-56f457e17daeeae5f65c8ad987acaf66.png" width="1794" height="567" class="img_ev3q"></p><ol start="7"><li>Paste the curl command to the text Editor</li></ol><p><img loading="lazy" src="/instana-techxchange/assets/images/text_editor-c2c1b7b5f03441a5230c7d16c8df98f2.png" width="1077" height="372" class="img_ev3q"></p><ol start="8"><li><p>Make the following changes to the curl command before running it in the Terminal window</p><ol><li>Add <strong>-k</strong> after the curl command to accept the self-Signed certificate</li><li>Adding <strong>?pretty</strong> will make the output more readable</li></ol></li></ol><ol start="9"><li>The final query will look like this</li></ol><p><img loading="lazy" src="/instana-techxchange/assets/images/curl_api_query-f18bfe8eea08db9d9677374babb6b85a.png" width="1072" height="174" class="img_ev3q"></p><ol start="10"><li>Run the Curl command by copying and pasting it to the Terminal window</li></ol><p><img loading="lazy" src="/instana-techxchange/assets/images/copy_curl-022943f40d52ca6ec4da92b38f02306c.png" width="1072" height="328" class="img_ev3q"></p><ol start="11"><li>Right click on the Terminal window and select <strong>paste</strong></li></ol><p><img loading="lazy" src="/instana-techxchange/assets/images/paste_curl-7f804d26ecc1feb58aa12916497a5013.png" width="633" height="316" class="img_ev3q"></p><ol start="12"><li>The API will list hosts monitored by Instana</li></ol><p><img loading="lazy" src="/instana-techxchange/assets/images/hosts_api-218be24902c17283395531cc7a58263e.png" width="1876" height="824" class="img_ev3q"></p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>A <strong>snapshot</strong> represents static information about an entity as it was at a specific point in time. To clarify: Static information is any information which is seldom changing, e.g. process IDs, host FQDNs or a list of host hard disks. The counterpart to static information are metrics which have a much higher change rate, e.g. host CPU usage or JVM garbage collection activity. Snapshots only contain static information.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="list-the-services-running-on-a-host">List the services running on a host<a href="#list-the-services-running-on-a-host" class="hash-link" aria-label="Direct link to List the services running on a host" title="Direct link to List the services running on a host">​</a></h3><p>We will now use the Response output from the previous curl command. The <strong>snapshotId</strong> in the response will be used in the next curl command to list services running on a host.</p><p>Use the follwoing steps to copy the snapshotId for one of the hosts, for example <strong>infra.ocp.ibm.edus</strong></p><ol><li><p>Copy the snapshotId from the response of the curl command in step 12. </p><p><img loading="lazy" src="/instana-techxchange/assets/images/copy_snapshotid-ee79a63d46e29bc7b778b2b34a6cd825.png" width="2940" height="1004" class="img_ev3q"></p></li><li><p>Copy the curl command below and paste it to the terminal</p></li></ol><p>Request:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> curl -k --silent -X GET -H </span><span class="token string" style="color:#e3116c">&quot;authorization: apiToken $apiToken&quot;</span><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;https://$host/api/infrastructure-monitoring/snapshots/&lt;snaphostId&gt;?pretty&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Paste the command to the Send text option in the Bastion host window</li></ol><p><img loading="lazy" src="/instana-techxchange/assets/images/copy_curl_snapshot-ce25890678a2038d9c116ac52102ef6b.png" width="1412" height="289" class="img_ev3q"></p><ol start="4"><li><p>Update the snapshotId in the commend with the snapshotId by removing the <strong>snapshotId</strong> and pasting the coppied id. </p><p><img loading="lazy" src="/instana-techxchange/assets/images/updated_snapshotId-73422d76821d6700a289e309f9993eac.png" width="1609" height="184" class="img_ev3q"></p></li><li><p>Run the Curl command to list services running on the host</p></li></ol><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>The service routes are listed with their ip, subnet and Fully Qualified Domain Name</p><p><img loading="lazy" src="/instana-techxchange/assets/images/applicaiton_routes-7dd350d0a5e2f053a96f7623a68eff52.png" width="679" height="607" class="img_ev3q"></p></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>The Host information includes filesystem, OS and Machine id. This is typically helpful for mapping host informaiotn with external data sources.</p><p><img loading="lazy" src="/instana-techxchange/assets/images/host_subnets-b1db919c5a911c67cfd51e5c8170da2a.png" width="1111" height="644" class="img_ev3q"></p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="44-events-and-alerts">4.4: Events and Alerts<a href="#44-events-and-alerts" class="hash-link" aria-label="Direct link to 4.4: Events and Alerts" title="Direct link to 4.4: Events and Alerts">​</a></h2><p>In this section we will fetch Events from applications monitored by Instana using API&#x27;s</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-a-list-of-all-open-events-opened-within-the-last-20-seconds-minutes">Get a list of all Open Events opened within the last 20 seconds minutes<a href="#get-a-list-of-all-open-events-opened-within-the-last-20-seconds-minutes" class="hash-link" aria-label="Direct link to Get a list of all Open Events opened within the last 20 seconds minutes" title="Direct link to Get a list of all Open Events opened within the last 20 seconds minutes">​</a></h3><p>The request will list all application Events in the last 20 seconds.</p><p>Request:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -k --silent -X GET -H </span><span class="token string" style="color:#e3116c">&quot;authorization: apiToken $apiToken&quot;</span><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;https://$host/api/events?windowSize=20000&amp;excludeTriggeredBefore=true&amp;pretty&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Response:</p><p><img loading="lazy" src="/instana-techxchange/assets/images/events_20_seconds-858d7f45a09c7e2eb3681192dbd93e07.png" width="1519" height="290" class="img_ev3q"></p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Adjust the windowSize if you do not see any Events returned. For example to view Events that occured in the past 1 minute use 60000 as the value for <strong>windowSize</strong></p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-new-custom-event">Create a new Custom Event<a href="#create-a-new-custom-event" class="hash-link" aria-label="Direct link to Create a new Custom Event" title="Direct link to Create a new Custom Event">​</a></h3><p>In this section we will use an API to create a new Custom Event and verify it in the Instana user interface. <br></p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Here is a description of a few of the attributes in the request <br>
<strong>id</strong> : The unique name of the custom event. Note this value is the same as the value in the PUT request URL. The name of the event we have used is <strong>robotshopcpu</strong> <br>
<strong>name</strong> : The name of the Event. In thsi example we named the Event <strong>Lab_Event1</strong> <br>
<strong>query</strong> : The dynamic query that spefifies the name of the applicaiton. In this example the application name is <strong>Robot-Shop</strong>  <br>
<strong>rules</strong> : The rules that will trigger the event. In this example, the event will trigger when the host CPU is greater than or equal to <strong>90%</strong> <br></p></div></div><p>Request:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> curl -k -X PUT  -H </span><span class="token string" style="color:#e3116c">&quot;Accept: application/json&quot;</span><span class="token plain"> -H </span><span class="token string" style="color:#e3116c">&quot;Content-Type: application/json&quot;</span><span class="token plain"> -H </span><span class="token string" style="color:#e3116c">&quot;Authorization: apiToken $apiToken&quot;</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;https://$host/api/events/settings/beta/event-specifications/custom/robotshopcpu&quot;</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d &#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;robotshopcpu&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Lab_Event1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;entityType&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;host&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;query&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;entity.application.name:Robot-Shop&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;triggering&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;description&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Monitor System Host CPU&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;expirationTime&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5000&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;enabled&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;rules&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;ruleType&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;threshold&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;metricName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;cpu.sys&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;metricPattern&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;rollup&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;window&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;aggregation&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;avg&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;conditionOperator&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&gt;=&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;conditionValue&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.9</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;severity&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;actions&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Response:</p><p><img loading="lazy" src="/instana-techxchange/assets/images/custom_event-1019369c85709cc3ac487cf09fef327c.png" width="1763" height="597" class="img_ev3q"></p><p>Use the following steps to verify the event has been created in the Instana application</p><ol><li>Select the <strong>Settings</strong> icon on the left navigation</li></ol><p><img loading="lazy" src="/instana-techxchange/assets/images/select_settings-3b9f618aec394591cd0f5d582905420f.png" width="282" height="653" class="img_ev3q"></p><ol start="2"><li>Select <strong>Events</strong> from the menu and enter the Event name specified in the request <strong>Lab_</strong></li></ol><p><img loading="lazy" src="/instana-techxchange/assets/images/custom_lab_event-4263176f92374bbbc93b5e0f54e8f760.png" width="1789" height="523" class="img_ev3q"></p><ol start="3"><li>Select the event to view the event configuration</li></ol><p><img loading="lazy" src="/instana-techxchange/assets/images/custom_lab_event_view-d1d6b3cc5c4afa67684ca83246433e0c.png" width="1793" height="709" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="45-summary">4.5: Summary<a href="#45-summary" class="hash-link" aria-label="Direct link to 4.5: Summary" title="Direct link to 4.5: Summary">​</a></h2><p>At this point, you have used the API&#x27;s to perform various tasks such as monitoring applciation metrics, getting a list of Events and creating new Events. API&#x27;s are helpful when automating tasks such as migrating configuration between environments or exporting metrics data to external systems.</p><p>Reference Link:</p><p>Instana OpenAPI documentation : <a href="https://instana.github.io/openapi/" target="_blank" rel="noopener noreferrer">https://instana.github.io/openapi/</a></p><hr></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/IBM/instana-techxchange/tree/main/labs/instana-v2/administer-instana/4-administer-with-API/index.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/instana-techxchange/labs/instana-v2/administer-instana/administer/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">3. Administer Instana</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/instana-techxchange/labs/instana-v2/administer-instana/quiz/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Quiz</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#41-create-an-instana-api-token" class="table-of-contents__link toc-highlight">4.1: Create an Instana API Token</a></li><li><a href="#42-application-metrics" class="table-of-contents__link toc-highlight">4.2: Application Metrics</a><ul><li><a href="#list-all-applications" class="table-of-contents__link toc-highlight">List all applications</a></li><li><a href="#list-applications-with-errors" class="table-of-contents__link toc-highlight">List applications with errors</a></li><li><a href="#query-application-services-by-an-application-name" class="table-of-contents__link toc-highlight">Query application services by an application name</a></li></ul></li><li><a href="#43-infrastructure-level-metrics" class="table-of-contents__link toc-highlight">4.3: Infrastructure-level metrics</a><ul><li><a href="#list-hosts-monitoried-by-instana" class="table-of-contents__link toc-highlight">List hosts monitoried by Instana</a></li><li><a href="#list-the-services-running-on-a-host" class="table-of-contents__link toc-highlight">List the services running on a host</a></li></ul></li><li><a href="#44-events-and-alerts" class="table-of-contents__link toc-highlight">4.4: Events and Alerts</a><ul><li><a href="#get-a-list-of-all-open-events-opened-within-the-last-20-seconds-minutes" class="table-of-contents__link toc-highlight">Get a list of all Open Events opened within the last 20 seconds minutes</a></li><li><a href="#create-a-new-custom-event" class="table-of-contents__link toc-highlight">Create a new Custom Event</a></li></ul></li><li><a href="#45-summary" class="table-of-contents__link toc-highlight">4.5: Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/docs/en/obi/current" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instana<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/au-en" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/instana-techxchange/assets/js/runtime~main.3fad31ff.js"></script>
<script src="/instana-techxchange/assets/js/main.df168817.js"></script>
</body>
</html>