"use strict";(self.webpackChunkinstana_techxchange=self.webpackChunkinstana_techxchange||[]).push([[3501],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=s(n),d=i,h=m["".concat(p,".").concat(d)]||m[d]||u[d]||o;return n?a.createElement(h,r(r({ref:t},c),{},{components:n})):a.createElement(h,r({ref:t},c))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[m]="string"==typeof e?e:i,r[1]=l;for(var s=2;s<o;s++)r[s]=n[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},19334:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var a=n(87462),i=(n(67294),n(3905));const o={title:"4. OpenTelemetry instrumentation",description:"Instrument demo application with OpenTelemetry",sidebar_position:4},r="OpenTelemetry instrumentation",l={unversionedId:"instana-v2/opentelemetry/opentelemetry-instrumentation/index",id:"instana-v2/opentelemetry/opentelemetry-instrumentation/index",title:"4. OpenTelemetry instrumentation",description:"Instrument demo application with OpenTelemetry",source:"@site/labs/instana-v2/opentelemetry/4-opentelemetry-instrumentation/index.mdx",sourceDirName:"instana-v2/opentelemetry/4-opentelemetry-instrumentation",slug:"/instana-v2/opentelemetry/opentelemetry-instrumentation/",permalink:"/instana-techxchange/labs/instana-v2/opentelemetry/opentelemetry-instrumentation/",draft:!1,editUrl:"https://github.com/IBM/instana-techxchange/tree/main/labs/instana-v2/opentelemetry/4-opentelemetry-instrumentation/index.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"4. OpenTelemetry instrumentation",description:"Instrument demo application with OpenTelemetry",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"3. Agent configuration",permalink:"/instana-techxchange/labs/instana-v2/opentelemetry/agent-configuration/"},next:{title:"5. Exploring Instana",permalink:"/instana-techxchange/labs/instana-v2/opentelemetry/explore/"}},p={},s=[{value:"Start the OpenTelemetry Demo Application",id:"start-the-opentelemetry-demo-application",level:2},{value:"Verify OpenTelemetry Demo Application",id:"verify-opentelemetry-demo-application",level:2},{value:"Create an Application in Instana",id:"create-an-application-in-instana",level:2},{value:"Generate OpenTelemetry Demo Application traffic",id:"generate-opentelemetry-demo-application-traffic",level:2}],c={toc:s},m="wrapper";function u(e){let{components:t,...o}=e;return(0,i.kt)(m,(0,a.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"opentelemetry-instrumentation"},"OpenTelemetry instrumentation"),(0,i.kt)("p",null,"For the purpose of this lab, we will use ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/instana/opentelemetry-demo/tree/main"},"Instana OpenTelemetry Demo Application"),"\nwhich is the fork of generic ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/open-telemetry/opentelemetry-demo"},"OpenTelemetry Demo Application"),"."),(0,i.kt)("p",null,"Instana's custom fork of the OpenTelemetry Demo Application is a microservice-based application, integrated with an Instana backend.\nThe demo shows the native Instana OpenTelemetry data collection, correlation of OpenTelemetry tracing and the underlying monitored infrastructure,\nand an example of trace continuity between Instana tracing and OpenTelemetry."),(0,i.kt)("p",null,"OpenTelemetry Demo Application was already installed for you in the lab environment. "),(0,i.kt)("p",null,"OpenTelemetry is an open-source observability framework with a collection of software development kits (SDKs), vendor-neutral or vendor-agnostic APIs, and tools for instrumentation.\nThis technology can generate, collect, export, and instrument telemetry data to analyze your platform's behavior and performance. Opentelemetry is also known as OTel.\nOpenTelemetry is included into Instana license, there's no additional payment required, but the monitored servers need to be licensed."),(0,i.kt)("h2",{id:"start-the-opentelemetry-demo-application"},"Start the OpenTelemetry Demo Application"),(0,i.kt)("p",null,"The OpenTelemetry Demo Application was already installed for you as a docker container. In order to start it, please follow the below steps:"),(0,i.kt)("p",null,"In the terminal, navigate to the OpenTelemetry Demo Application directory"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"cd /root/opentelemetry-demo/\n")),(0,i.kt)("p",null,"run the docker compose by using the below command"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"docker compose up --no-build -d\n")),(0,i.kt)("p",null,"after few minutes, all of the components should be up and running as described below"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"otelapp1",src:n(94085).Z,width:"707",height:"511"})),(0,i.kt)("h2",{id:"verify-opentelemetry-demo-application"},"Verify OpenTelemetry Demo Application"),(0,i.kt)("p",null,"Once the OpenTelemetry Demo Application was started, it is now time to verify\nif the applications works and delivers metrics as expected."),(0,i.kt)("p",null,"Your instance of OpenTelemetry Demo Application is available under the http://docker:8080/\nLet's use a browser to open that page. Please note the http in the address bar. "),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"otelapp",src:n(34872).Z,width:"1907",height:"936"})),(0,i.kt)("p",null,"Exercise the application to ensure it is working properly."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"The OpenTelemetry Demo Application has an automated load running that will generate monitored transactions within Instana.")),(0,i.kt)("h2",{id:"create-an-application-in-instana"},"Create an Application in Instana"),(0,i.kt)("p",null,'Within Instana, it is possible to view the OpenTelemetry Demo Application transactions via the "Analytics" tab or via the "All Services" view within "Applications",\nbut normally, you want to have a view that is specifically tailored to your business application.'),(0,i.kt)("p",null,"To create that customized view of the OpenTelemetry Demo Application, let's create an application perspective in Instana. Log in to your Instana instance and create new application perspective."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"appperspective",src:n(2460).Z,width:"1189",height:"728"})),(0,i.kt)("p",null,'Switch to "Advanced mode"'),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"appperspective2",src:n(96803).Z,width:"1043",height:"632"})),(0,i.kt)("p",null,"As seen in the screen capture below: "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'First, provide application name of your choice (for example "My Demo Application")'),(0,i.kt)("li",{parentName:"ul"},'2nd, select the "Add filter" button.'),(0,i.kt)("li",{parentName:"ul"},'3rd, in the dialog, type the word "host" to filter the list.'),(0,i.kt)("li",{parentName:"ul"},'4th, select Host -> Name" from the filtered list.')),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"appperspective2",src:n(43584).Z,width:"1041",height:"689"})),(0,i.kt)("p",null,'Continue defining the "Application Perspective" as seen in the dialog below.'),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'After selecting "Host -> Name", you will see a text box. If you click on the box, it should provide a list of your hosts. You can either select your host name ("docker") or you can type the name of the host.'),(0,i.kt)("li",{parentName:"ul"},'Next, select the "All downstream services" radio button.'),(0,i.kt)("li",{parentName:"ul"},'Select the "All Calls" radio button.'),(0,i.kt)("li",{parentName:"ul"},'Finally, click the "Create" button to create the application perspective.')),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"apperspective2",src:n(94393).Z,width:"1031",height:"721"})),(0,i.kt)("p",null,'The Instana UI will automatically switch your context to the new "Application Perspective". Initially, there will not be any data in the new "Application Perspective".',(0,i.kt)("br",{parentName:"p"}),"\n","Data will begin to be populated within a couple of minutes."),(0,i.kt)("h2",{id:"generate-opentelemetry-demo-application-traffic"},"Generate OpenTelemetry Demo Application traffic"),(0,i.kt)("p",null,'Now that the "Application Perspective" has been defined and the demo application is up and running, you can either generate traffic via the UI or allow the automated load to execute.\nTo manually generate traffic, go back to the OpenTelemetry Demo Application in the browser, click through the site and explore the page, add products to the cart, make some orders.'),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"appperspective2",src:n(68281).Z,width:"1902",height:"922"})),(0,i.kt)("p",null,"Once you have purchased some of the products, let's go back to the Instana UI, open your Application Perspective to see\nthe captured traffic."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"appperspective3",src:n(48467).Z,width:"2455",height:"1126"})),(0,i.kt)("p",null,"This view concludes this chapter. You are now able to see the traffic from your instance of the OpenTelemetry Demo Application captured by Instana.\nLet's move to the next sections."))}u.isMDXComponent=!0},94393:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/createApplication3-9c058ca6ac6e3e89b5c255b7c6c20eea.png"},43584:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/defineApplication002-b12eac2137a6c1b96b6f9cc131fb05dc.png"},94085:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/otel-instrumentation-001-2b8f3d59deb20811de2e28aea0342e9b.png"},2460:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/otel-instrumentation-002-fixed-95b93c68eab9d1cca862727639ad5f96.png"},96803:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/otel-instrumentation-003-fixed-fbffaddaa4aa24f80a1c05c348014e54.png"},48467:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/otel-instrumentation-006-fixed-19c28cc62195abc99479e6fb25d20ab8.png"},34872:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/otel-instrumentation-008-b7848518eb846b1eb4d3959ac0f2015b.png"},68281:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/otel-instrumentation-009-2e7bad3cb5b23ba5a112cdf58d45e1dc.png"}}]);