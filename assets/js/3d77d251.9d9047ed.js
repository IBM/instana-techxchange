"use strict";(self.webpackChunkinstana_techxchange=self.webpackChunkinstana_techxchange||[]).push([[1601],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=p(n),c=r,h=d["".concat(l,".").concat(c)]||d[c]||m[c]||s;return n?a.createElement(h,o(o({ref:t},u),{},{components:n})):a.createElement(h,o({ref:t},u))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,o=new Array(s);o[0]=c;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[d]="string"==typeof e?e:r,o[1]=i;for(var p=2;p<s;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},44451:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>s,metadata:()=>i,toc:()=>p});var a=n(87462),r=(n(67294),n(3905));const s={title:"3. Instana Server Installation (Standard Edition)",description:"How to install the Instana Server on a single server Self-Hosted configuration",sidebar_position:4},o="Instana Server Installation",i={unversionedId:"instana-v2/server-and-agent-install-lab/server-installation/index",id:"instana-v2/server-and-agent-install-lab/server-installation/index",title:"3. Instana Server Installation (Standard Edition)",description:"How to install the Instana Server on a single server Self-Hosted configuration",source:"@site/labs/instana-v2/server-and-agent-install-lab/3-server-installation/index.mdx",sourceDirName:"instana-v2/server-and-agent-install-lab/3-server-installation",slug:"/instana-v2/server-and-agent-install-lab/server-installation/",permalink:"/instana-techxchange/labs/instana-v2/server-and-agent-install-lab/server-installation/",draft:!1,editUrl:"https://github.com/IBM/instana-techxchange/tree/main/labs/instana-v2/server-and-agent-install-lab/3-server-installation/index.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"3. Instana Server Installation (Standard Edition)",description:"How to install the Instana Server on a single server Self-Hosted configuration",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"2. Lab Environment",permalink:"/instana-techxchange/labs/instana-v2/server-and-agent-install-lab/lab-environment/"},next:{title:"4. Agent Installation",permalink:"/instana-techxchange/labs/instana-v2/server-and-agent-install-lab/agent-installation/"}},l={},p=[{value:"3.1: Introduction",id:"31-introduction",level:2},{value:"3.2: Prerequisites",id:"32-prerequisites",level:2},{value:"3.3: Installing the stanctl Command",id:"33-installing-the-stanctl-command",level:2},{value:"3.4: Installing the Instana Server",id:"34-installing-the-instana-server",level:2},{value:"3.5: Launch the Instana User interface",id:"35-launch-the-instana-user-interface",level:2},{value:"3.6: Turning on optional features and configuration changes",id:"36-turning-on-optional-features-and-configuration-changes",level:2},{value:"3.7: Upgrading the Instana server",id:"37-upgrading-the-instana-server",level:2},{value:"3.8: Setting Up Self-Monitoring",id:"38-setting-up-self-monitoring",level:2},{value:"3.9: Summary",id:"39-summary",level:2}],u={toc:p},d="wrapper";function m(e){let{components:t,...s}=e;return(0,r.kt)(d,(0,a.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"instana-server-installation"},"Instana Server Installation"),(0,r.kt)("h2",{id:"31-introduction"},"3.1: Introduction"),(0,r.kt)("p",null,"Instana refers to their on-premises deployment as ",(0,r.kt)("strong",{parentName:"p"},"self-hosted")," and the Instana Server as the ",(0,r.kt)("strong",{parentName:"p"},"Instana backend"),".\nThroughout this document, if you see ",(0,r.kt)("strong",{parentName:"p"},"Instana Server"),", we are referring to the ",(0,r.kt)("strong",{parentName:"p"},"self-hosted Instana backend"),"."),(0,r.kt)("p",null,"Instana server is available as SaaS (preferred option) or self hosted (aka\non-prem). For on-premises installations, Instana offers multiple options:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Standard Edition")," is a ",(0,r.kt)("em",{parentName:"li"},"containerized")," self-hosted deployment that can be deployed\non a single server configuration or a 3 server configuration. Self-Hosted is what Instana calls its on-premises deployments.\nUnder the covers, Standard Edition uses K3S kubernetes. But, nearly all of the kubernetes complexity is managed for\nour customers via the use of the ",(0,r.kt)("em",{parentName:"li"},"stanctl")," command.   This option is the perferred self-hosted\ndeployment for small and medium sized deployments.  Standard Edition is a multi-tenant solution\nthat supports all recent Instana enhancements."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Custom Edition")," with the cloud native backend components running in\na kubernetes cluster and the datastores running either distributed across\nmultiple servers or in the kubernetes cluster. This configuration is\nmulti-tenant and intended for large scale deployments and for customers looking for a fully\nresilient deployment with data replicated to multiple servers. For assistance with architecture/planning, contact the SWAT team\nor open a ",(0,r.kt)("a",{parentName:"li",href:"http://ibm.biz/automation-swat"},"SWAT Request")," request (IBM\ninternal) or contact your IBM sales representative."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Docker")," self-hosted is a ",(0,r.kt)("em",{parentName:"li"},"Containerized")," deployment that does not\nsupport multi-tenancy. Of course, on-premises could be deployed into a public cloud.\nThe Docker deployment offers both a single server and a 2 server configuration.\nThis option is no longer strategic and lacks a few key capabilities including\nlogging, synthetics, and the Automation catalog.")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"On-premises (self-hosted) releases are delivered every 4 weeks. The release have\nodd numbers such as 263, 265, 267, etc. When upgrading, you may upgrade from N-1\nor N-2, but you can't skip more than one release. So, you can upgrade from 265\nto 267 or 269, but not to 271. Even numbered releases are for SaaS only. SaaS is\nupgraded every 2 weeks.")),(0,r.kt)("p",null,"For the installation of the Instana server, we'll be following the instructions\nfrom the Instana documentation for ",(0,r.kt)("strong",{parentName:"p"},"Installing Standard Edition"),".\nThe instructions can be found\n",(0,r.kt)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/instana-observability/current?topic=backend-installing-standard-edition"},"here"),"\nfor your reference, but you can follow the steps below. You will be performing\nan air-gapped installation during TechXchange, but Instana does support on-line installs."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Standard Edition")," is one of Instana's smallest on-premises\ninstallation options and can be configured for POCs and small/medium sized production environments.\nStandard Edition does offer a 3 server configuration for increased scalability, but does not match the scalability\nand resiliency of a full ",(0,r.kt)("em",{parentName:"p"},"Custom Edition")," kubernetes based deployment.  The installation of Instana will\nbe completed on the VM ",(0,r.kt)("strong",{parentName:"p"},"instana"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"install instana architecture",src:n(71688).Z,width:"973",height:"733"})),(0,r.kt)("h2",{id:"32-prerequisites"},"3.2: Prerequisites"),(0,r.kt)("p",null,"Instana requires a Linux server with 16 cores, 64 Gig of RAM and few hundred Gig\nof disk space for a POC sized deployment.  However, if you want to enable some of the optional ",(0,r.kt)("em",{parentName:"p"},"feature flags"),"\nsuch as ",(0,r.kt)("strong",{parentName:"p"},"logging"),", ",(0,r.kt)("strong",{parentName:"p"},"synthethics"),", or the ",(0,r.kt)("strong",{parentName:"p"},"Automation catalog"),", you will need additional vCPUs and memory.  "),(0,r.kt)("p",null,"If the optional features are required, see the additional vCPU and memory requirements documented\n",(0,r.kt)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/instana-observability/current?topic=cluster-system-requirements#cpu-and-memory-requirements"},"here"),".   "),(0,r.kt)("p",null,"It also requires fast backend storage.\nFor environments with even a few hundred servers, you'll need 6000 IOPS or more.\nFor larger deployments, you'll need more capacity. Several different versions of\nLinux are supported. We have chosen Red Hat 9 for this environment."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Normally, you would need to ensure that the virtual machine has the correct\nports opened in the firewall for the agent, UI, and EUM communications. We have\nalready done this work for you. For reference,\n",(0,r.kt)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/instana-observability/current?topic=cluster-system-requirements#networking-requirements"},"here")," are the ports.\nthat need to be opened for the Instana Server for an on-prem deployment. The\nThe ports for SaaS, Docker, and Custom Edition are slightly different.")),(0,r.kt)("p",null,"You are now ready to access the lab environment.  All work will be done from the ",(0,r.kt)("strong",{parentName:"p"},"student")," virtual machine."),(0,r.kt)("p",null,"Click on the ",(0,r.kt)("strong",{parentName:"p"},"student")," virtual machine to open the desktop on the ",(0,r.kt)("strong",{parentName:"p"},"student")," VM."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"student-vm",src:n(84905).Z,width:"1146",height:"463"})),(0,r.kt)("p",null,"Next, double click on the ",(0,r.kt)("strong",{parentName:"p"},"Terminal")," icon within the Linux desktop to launch a terminal window."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"terminal",src:n(72386).Z,width:"373",height:"565"})),(0,r.kt)("p",null,"Next, ssh to the Instana server VM from within the terminal window."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"ssh root@instana\n")),(0,r.kt)("p",null,'When prompted, enter "Passw0rd" to specify the root password on the Instana server.  The password contains an upper case "P" and a "zero" instead of the letter "O".'),(0,r.kt)("p",null,"You should now be logged into the Instana server virtual machine as the root user."),(0,r.kt)("p",null,"Prior to installing Instana, there are a number of prerequisites that need to be in place.  "),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"For this lab, we have already setup the prerequisites, but it is important that we review them here.",(0,r.kt)("br",{parentName:"p"}),"\n","For reference, the requirements are documented ",(0,r.kt)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/instana-observability/current?topic=cluster-system-requirements"},"here"),".",(0,r.kt)("br",{parentName:"p"}),"\n","Key prereqs are:"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"Filesystems must be setup properly on the server.  Key requirements are:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Approximately 60 Gig of space in the /var filesystem to store the container images that will be used for Instana."),(0,r.kt)("li",{parentName:"ul"},"Approximately 40 Gig of space in the /home directory."),(0,r.kt)("li",{parentName:"ul"},"Four large filesystems to store the data.  In your lab enviroment, you will see the following 4 directories:\n(/mnt/instana/stanctl/analytics, /mnt/instana/stanctl/data, /mnt/instana//stanctl/metrics, /mnt/instana/stanctl/objects)\nFor POCs and smaller environments, it is okay to use a single filesystem, but for larger production environments, these should be separate filesystems with very fast disk I/O performance.")))),(0,r.kt)("p",{parentName:"admonition"},"Note: For this lab we setup directories for the Instana installation.  Normally, these are setup as separate filesystems."),(0,r.kt)("p",{parentName:"admonition"},"Firewall ports need to be opened for inbound and outbound connections on key ports.  This has already been setup on the server,\nbut the ports are documented ",(0,r.kt)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/instana-observability/current?topic=cluster-system-requirements#networking-requirements"},"here")),(0,r.kt)("p",{parentName:"admonition"},"A few kernel tuning changes are required in order to optimize performance for Instana.  They kernel changes are documented ",(0,r.kt)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/instana-observability/current?topic=cluster-preparing#kernel-parameters"},"here"),"\nbut have already been setup in your lab environment.  "),(0,r.kt)("p",{parentName:"admonition"},"Prior to setting up Instana, you must setup DNS entries and aliases for the Instana server and key URLs such as the Agent ingress, OpenTelemetry ingress, etc.\nThe required DNS entries are documented ",(0,r.kt)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/instana-observability/current?topic=cluster-preparing#dns-settings"},"here"),", but have already been setup in your lab environment."),(0,r.kt)("p",{parentName:"admonition"},"Once, the prerequisites have been setup, you are ready to install the Instana server.  We will be performing an air-gapped installed.")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"33-installing-the-stanctl-command"},"3.3: Installing the stanctl Command"),(0,r.kt)("p",null,"The first step is to install the ",(0,r.kt)("strong",{parentName:"p"},"stanctl")," command on the Instana server virtual machine.   This command will be used to install\nthe Instana server as well as perform administrative tasks.  This command helps reduce the complexity of installing and administering\nan Instana server.  In an air-gapped environment, you would run these commands from a bastion node and then extract the stanctl command from the air-gapped package.\nSince this environment is not air-gapped, we'll be running the commands on the Instana server.",(0,r.kt)("br",{parentName:"p"}),"\n","The steps below are the same steps that you would run on the Bastion node in an air-gapped environment."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The following steps will install the ",(0,r.kt)("strong",{parentName:"p"},"stanctl")," command on the server.   ")),(0,r.kt)("p",null,"First, you must setup the yum repository. Then, install the ",(0,r.kt)("strong",{parentName:"p"},"stanctl")," command from the yum repository."),(0,r.kt)("p",null,"Begin by setting a DOWNLOAD_KEY environment variable.  When you get an Instana license, you are given a Download/Agent Key and a Sales Key."),(0,r.kt)("p",null,"In this lab, you can get the Download Key from the /media/readme.txt file"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"cat /media/readme.txt\n")),(0,r.kt)("p",null,"Copy and paste the Download Key and run the following command.  But, make sure you replace ",(0,r.kt)("strong",{parentName:"p"},"<download_key>")," with the actual download key from the readme.txt file."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"export DOWNLOAD_KEY=<download_key>\n")),(0,r.kt)("p",null,"Next execute the following command.  This will add the Instana repository to your list of Red Hat yum repositories.  Similar commands are documented for Debian/Ubuntu and SUSE Linux."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"cat << EOF > /etc/yum.repos.d/Instana-Product.repo\n[instana-product]\nname=Instana-Product\nbaseurl=https://_:$DOWNLOAD_KEY@artifact-public.instana.io/artifactory/rel-rpm-public-virtual/\nenabled=1\ngpgcheck=0\ngpgkey=https://_:$DOWNLOAD_KEY@artifact-public.instana.io/artifactory/api/security/keypair/public/repositories/rel-rpm-public-virtual\nrepo_gpgcheck=1\nEOF\n")),(0,r.kt)("p",null,"Now, install the ",(0,r.kt)("strong",{parentName:"p"},"stanctl")," command by typing:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"yum install -y stanctl\n")),(0,r.kt)("p",null,"Verify that the stanctl command has been successfully installed, is in your path, and is the correct version, by typing:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"stanctl -v\n")),(0,r.kt)("p",null,"The output should look something like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"stanctl version 1.2.1 (commit=a3a91ef3db195cfbba3e4b9415d4afa610c49e12, date=2024-05-31T10:27:43Z)\n")),(0,r.kt)("p",null,"This tells you that you have version 1.2.1 of the stanctl command installed.  This version is actually slightly old.  We have intentionally pinned\nthis version in the yum repository to ensure that the stanctl command version matches the air-gapped package that we have downloaded."),(0,r.kt)("p",null,"We recommend pinning the version to ensure that the ",(0,r.kt)("strong",{parentName:"p"},"stanctl")," command does not accidentally get upgraded when you upgrade the operating system."),(0,r.kt)("h2",{id:"34-installing-the-instana-server"},"3.4: Installing the Instana Server"),(0,r.kt)("p",null,"You are now ready to install the Instana Server"),(0,r.kt)("p",null,"Normally, the next step would be to download the air-gapped package by typing ",(0,r.kt)("strong",{parentName:"p"},"stanctl air-gapped package")," on a bastion node.  "),(0,r.kt)("p",null,"This would download the air-gapped package.   Then, you would copy the tar file to the Instana server.   We have already executed that step and placed\nthe air-gapped package in /root directory.  You will see a file called /root/instana-airgapped.tar.gz.  We will be using that file to perform the install."),(0,r.kt)("p",null,"The next step is to import the air-gapped package into your server.  Initiate this command by typing:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"stanctl air-gapped import -f /root/instana-airgapped.tar.gz\n")),(0,r.kt)("p",null,"You should see output similar to what's shown below."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"import",src:n(59198).Z,width:"768",height:"144"})),(0,r.kt)("p",null,"Once the air-gapped package has been imported, you can perform the air-gapped install."),(0,r.kt)("p",null,"To install the Instana server, you will use the ",(0,r.kt)("strong",{parentName:"p"},"stanctl up")," command.  This command has a number of options.  If you type ",(0,r.kt)("strong",{parentName:"p"},"stanctl up --help"),"\nyou can the available options."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"stanctl up --help\n")),(0,r.kt)("p",null,"When you evaluate the output, you'll see a few very important flags that are described below."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"--air-gapped:  This option indicates that you want to perform an air-gapped install.  If you don't specify this flag, stanctl will attempt to access the external repositories to download the code."),(0,r.kt)("li",{parentName:"ul"},"--core-smtp-from:  This specifies the user that sends emails from the Instana server"),(0,r.kt)("li",{parentName:"ul"},"--core-smtp-host:  This the hostname or IP address of the SMTP server that Instana will use in order to send emails."),(0,r.kt)("li",{parentName:"ul"},"--core.smtp-port:  Specifies the port number of the SMTP server"),(0,r.kt)("li",{parentName:"ul"},"--timeout:  This specifies the number of minutes and seconds in which the installation must complete.  The default is 30 minutes (30m0s)")),(0,r.kt)("p",null,"Normally, the install finishes within 15 to 20 minutes on a fast server.  However, during TechXchange, the servers are under heavy load.\nSo, we want to increase the timeout value from 30 minutes to 60 minutes to ensure that it has time to complete."),(0,r.kt)("p",null,"We're now ready to initiate the installation. Issue the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"stanctl up --air-gapped --core-smtp-from lab@techxchange.com --core-smtp-host instana.training --core-smtp-port 25 --timeout 60m0s\n")),(0,r.kt)("p",null,"This command will install the Instana backend (server) and configure the SMTP settings."),(0,r.kt)("p",null,"After issuing the command, you will be prompted for a number of required parameters.  The Download Key and Sales Key can be found in the /media/readme.txt file."),(0,r.kt)("p",null,"Please respond to the following prompts as seen below:\n",(0,r.kt)("img",{alt:"installPrompts",src:n(45713).Z,width:"611",height:"158"})),(0,r.kt)("p",null,"First, you will be prompted for the type of installation (demo or production).  Press ",(0,r.kt)("strong",{parentName:"p"},"Enter")," to accept the default ",(0,r.kt)("strong",{parentName:"p"},"demo")," server installation."),(0,r.kt)("p",null,"Next, you will be prompted for the ",(0,r.kt)("em",{parentName:"p"},"Download Key"),".  When prompted, copy and paste the ",(0,r.kt)("strong",{parentName:"p"},"Download Key")," from the /media/readme.txt file."),(0,r.kt)("p",null,"You will be prompted for the ",(0,r.kt)("em",{parentName:"p"},"Sales key"),".  At the prompt, copy and paste the ",(0,r.kt)("strong",{parentName:"p"},"Sales Key")," from the /media/readme.txt file."),(0,r.kt)("p",null,"Next, enter the ",(0,r.kt)("em",{parentName:"p"},"domain")," for the Instana server.  This is typically the fully qualified hostname of the Instana server and needs to be registered in DNS.",(0,r.kt)("br",{parentName:"p"}),"\n","For this lab, type ",(0,r.kt)("strong",{parentName:"p"},"instana.training"),"."),(0,r.kt)("p",null,"Enter the ",(0,r.kt)("em",{parentName:"p"},"tenant name")," for this Instana server.  Instana is multi-tenant, so you must specify a tenant name.   Type ",(0,r.kt)("strong",{parentName:"p"},"labs")," for the ",(0,r.kt)("em",{parentName:"p"},"tenant name"),"."),(0,r.kt)("p",null,"Enter the ",(0,r.kt)("em",{parentName:"p"},"unit name")," for the Instana server.  For this lab, type ",(0,r.kt)("strong",{parentName:"p"},"student")," for the ",(0,r.kt)("em",{parentName:"p"},"unit name"),".  "),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The tenant and unit name are very important.  They become part of the URL that is needed to access the Instana server.  The hostname for the URL must be registered in DNS.\nSo, for this lab, you MUST use the names specified in the lab guide to ensure your URL matches the DNS entries.  Ultimately, your Instana server URL will be ",(0,r.kt)("a",{parentName:"p",href:"https://student-labs.instana.training"},"https://student-labs.instana.training"))),(0,r.kt)("p",null,"Next, you will be prompted for the Instana ",(0,r.kt)("em",{parentName:"p"},"admin password"),".  Type ",(0,r.kt)("strong",{parentName:"p"},"Passw0rd")," for the ",(0,r.kt)("em",{parentName:"p"},"password"),"."),(0,r.kt)("p",null,"Then, you will be prompted to confirm the ",(0,r.kt)("em",{parentName:"p"},"password"),".  Again, type ",(0,r.kt)("strong",{parentName:"p"},"Passw0rd"),"."),(0,r.kt)("p",null,"Finally, you will be prompted to enter a TLS certificate.  If you want to use your own signed certificate, you would enter the path and filename of the certificate.\nIn this case, just press the ",(0,r.kt)("strong",{parentName:"p"},"Enter")," key and the installer will generate a self-signed certificate."),(0,r.kt)("p",null,"Now that you have entered all of the required information, the installation will begin and should take about 20 to 30 minutes to complete."),(0,r.kt)("p",null,"After the installation completes, you will see an output similart to what's shown below."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"installed",src:n(34988).Z,width:"524",height:"359"})),(0,r.kt)("p",null,"At the end of the installation, the last part of the installation output is the URL and username that will be used to access the Instana server.\nPer the screen capture above, the URL will be ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://instana.training"},"https://instana.training"))," and the username is ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"mailto:admin@instana.local"},"admin@instana.local")),"."),(0,r.kt)("p",null,"You can login to that URL with the username and password that you specified during the installation (",(0,r.kt)("strong",{parentName:"p"},"Passw0rd"),")."),(0,r.kt)("p",null,"During the installation process, the license file was automatically downloaded and placed in the /root/.stanctl/license.json file.  It was also installed on the Instana server."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"35-launch-the-instana-user-interface"},"3.5: Launch the Instana User interface"),(0,r.kt)("p",null,"Open the Firefox browser by clicking on the Firefox icon on the desktop."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"terminal",src:n(72386).Z,width:"373",height:"565"})),(0,r.kt)("p",null,"Once Firefox launches, enter the URL for the Instana server (",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://instana.training"},"https://instana.training")),") or click on the ",(0,r.kt)("strong",{parentName:"p"},"Instana")," bookmark on the menu bar."),(0,r.kt)("p",null,"Since you are using a self-signed certificate, you will see a security warning.  Click on Advanced."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"selfSigned",src:n(3823).Z,width:"870",height:"225"})),(0,r.kt)("p",null,"Then, click ",(0,r.kt)("strong",{parentName:"p"},"Accept the Risk and Continue")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"accept",src:n(43023).Z,width:"800",height:"290"})),(0,r.kt)("p",null,"Finally, type in the username and password to log into the Instana server.  The username is ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"mailto:admin@instana.local"},"admin@instana.local"))," and the password is ",(0,r.kt)("strong",{parentName:"p"},"Passw0rd")),(0,r.kt)("p",null,"Then, click the ",(0,r.kt)("strong",{parentName:"p"},"Login")," button."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(55772).Z,width:"520",height:"505"})),(0,r.kt)("p",null,"After logging in, you will receive another warning because the URL has done a redirect to add the unit and tenant into the URL."),(0,r.kt)("p",null,"Once again, click on Advanced and accept the risks and continue."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(74951).Z,width:"861",height:"570"})),(0,r.kt)("p",null,"You should now see Instana's welcome page where you can see many different options for installing Agents into different environments.   We'll be using those in the next section of the lab."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(57699).Z,width:"1601",height:"667"})),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"If the Instana user interface is not available, do the following to diagnose.  First, confirm that you see the following message when your installation completed.\nSpecifically, you are looking for the string ",(0,r.kt)("strong",{parentName:"p"},"Successfully installed Instana Self-Hosted Standard Edition"),"\n",(0,r.kt)("img",{alt:"installed",src:n(34988).Z,width:"524",height:"359"})),(0,r.kt)("p",{parentName:"admonition"},"Assuming that the installation completed, confirm that all of the kubernetes pods are running.  Type ",(0,r.kt)("strong",{parentName:"p"},"kubectl get pods -A")),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"kubectl get pods -A\n")),(0,r.kt)("p",{parentName:"admonition"},"You will see output similar to what's shown below.  For each pod, you should see a status of ",(0,r.kt)("strong",{parentName:"p"},"Running")," and the Ready column should have 1/1 or 2/2, indicating that all of the expected containers are running.\nIf you see 0/1, it indicates that 1 container is expected and zero are running.   If you see 1/2, it means that 2 containers are expected, but only 1 is running.\n",(0,r.kt)("img",{alt:"installed",src:n(96141).Z,width:"980",height:"328"})),(0,r.kt)("p",{parentName:"admonition"},"If you do see pods with 0/1, 1/2, or 0/2, look at the status column.",(0,r.kt)("br",{parentName:"p"}),"\n","Unless you see ",(0,r.kt)("strong",{parentName:"p"},"STATUS")," of ",(0,r.kt)("strong",{parentName:"p"},"CrashLoopBackoff")," or ",(0,r.kt)("strong",{parentName:"p"},"Error")," or ",(0,r.kt)("strong",{parentName:"p"},"CreateContainerError"),", it is likely that the Instana server is still starting up.\nGive it a little more time.  Every minute or so, run the ",(0,r.kt)("strong",{parentName:"p"},"kubectl get pods -A")," command to see if additional pods have started. "),(0,r.kt)("p",{parentName:"admonition"},"Once all of the pods are ",(0,r.kt)("strong",{parentName:"p"},"Running"),", you should be able to log into the user interface.")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"36-turning-on-optional-features-and-configuration-changes"},"3.6: Turning on optional features and configuration changes"),(0,r.kt)("p",null,"Once the Instana server is installed, people frequently have the need to make modifications to the configuration.  There are two ways to make\nchanges.  First, you can execute the ",(0,r.kt)("strong",{parentName:"p"},"stanctl backend apply")," command and pass in parameters.  To see what options are available, type the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"stanctl backend apply --help\n")),(0,r.kt)("p",null,"You will see a number of optional parameters that can be specified."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(55340).Z,width:"1146",height:"296"})),(0,r.kt)("p",null,"During this lab, the only change we are going to make is to enable optional feature flags."),(0,r.kt)("p",null,"The syntax to enable a feature flag is to execute:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"stanctl backend apply --core-feature-flags <flag name>=true\n")),(0,r.kt)("p",null,"To disable a feature flag, run the same command, but set the value to ",(0,r.kt)("strong",{parentName:"p"},"false")," instead of ",(0,r.kt)("strong",{parentName:"p"},"true"),"."),(0,r.kt)("p",null,"It is possible to enable multiple feature flags via a single command."),(0,r.kt)("p",null,"For this lab, let's enable the synthetics capabilities.  This requires multiple flags to be enabled.  To enable all of the synthetics features, execute the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"stanctl backend apply  --core-feature-flags feature.synthetics.enabled=true feature.synthetic.browser.create.test.enabled=true feature.synthetic.browser.script.enabled=true\n")),(0,r.kt)("p",null,"You will see output similar to what's shown below indicating that you have successfully setup the feature flag."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(6012).Z,width:"1168",height:"236"})),(0,r.kt)("p",null,"To see the synthetics feature flag within the Instana user interface, you must refresh your browser or log out and back in again."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Here is a list of several other feature flags that are frequently used."),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"Logging:  stanctl backend apply --core-feature-flags feature.logging.enabled=true"),(0,r.kt)("li",{parentName:"ul"},"Automation/Action Catalog:   stanctl backend apply --core-feature-flags feature.automation.enabled=true feature.action.automation.enabled=true"),(0,r.kt)("li",{parentName:"ul"},"Power HMC:  stanctl backend apply --core-feature-flags feature.phmc.enabled=true"),(0,r.kt)("li",{parentName:"ul"},"Z HMC:  stanctl backend apply --core-feature-flags feature.zhmc.enabled=true"),(0,r.kt)("li",{parentName:"ul"},"Memory Leak Detection:  stanctl backend apply --core-feature-flags feature.rules.memoryleak.enabled=true"),(0,r.kt)("li",{parentName:"ul"},"VMware vSphere Monitoring:  stanctl backend apply --core-feature-flags feature.vsphere.enabled=true"),(0,r.kt)("li",{parentName:"ul"},"SLO features including apdex:  stanctl backend apply --core-feature-flags feature.slo.enabled=true feature.slo.websites.enabled=true feature.apdex.enabled=true feature.sloV2.enabled=true"),(0,r.kt)("li",{parentName:"ul"},"Business Monitoring:  stanctl backend apply --core-feature-flags feature.business.observability.enabled=true"))),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"37-upgrading-the-instana-server"},"3.7: Upgrading the Instana server"),(0,r.kt)("admonition",{title:"Do not perform these steps",type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"You should not perform any steps in this section, it is for information only."),(0,r.kt)("p",{parentName:"admonition"},"We want you to know the process for performing an upgrade.")),(0,r.kt)("p",null,"Note:  The following steps are a typical upgrade procedure, but it is important to always read the documentation in\ncase a particular version of the product requires additional steps or requirements such as increased CPU or Memory."),(0,r.kt)("p",null,"When upgrading an Instana server, it is important to know that you can only skip\none release when upgrading. The on-prem/self-hosted releases use odd numbers.\nThat means that you can upgrade from version 271 to either 273 or 275. But, you\ncan't upgrade from 271 to 279 because that would be skipping 2 releases and\nisn't supported. It is important for customers to know this because they need to\nkeep their Instana server patched on a fairly regular basis. Otherwise, it will\nmean that they will have to perform multiple steps to upgrade to the current\nversion."),(0,r.kt)("p",null,"This means that you typically want to plan to upgrade your Instana server every month or 2 at the most.  Otherwise, you have to perform multiple upgrades when you do decide to upgrade the server."),(0,r.kt)("p",null,"Before attempting to upgrade, you want to confirm your current version. Issue\nthe ",(0,r.kt)("strong",{parentName:"p"},"stanctl version")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"stanctl -v\n")),(0,r.kt)("p",null,'If you have pinned your version, then you can issue the following command.  This command is specific to Red Hat.   Similar commands are available for other platforms.\nFor example "apt-mark hold stanctl" for Ubuntu and Debian.'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"yum versionlock delete stanctl\n")),(0,r.kt)("p",null,"Once you have unlocked the yum repository, you can upgrade the stanctl command by typing:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"yum update stanctl\n")),(0,r.kt)("p",null,"Confirm that stanctl has been upgraded by typing:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"stanctl -v\n")),(0,r.kt)("p",null,"Following the upgrade, you can use the following command to add the version lock back in place:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"yum versionlock add stanctl\n")),(0,r.kt)("p",null,"Finally, you can upgrade the Instana server by issuing the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"stanctl up\n")),(0,r.kt)("p",null,"You will be prompted whether you want to upgrade the Instana server.  Select the option to upgrade the server and within 10 or 15 minutes the servers will be upgraded."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"38-setting-up-self-monitoring"},"3.8: Setting Up Self-Monitoring"),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"Standard Edition")," Instana backend includes support for self-monitoring.  This can easily be setup via the ",(0,r.kt)("strong",{parentName:"p"},"stanctl")," command.\nTo enable self-monitoring, run the following command as the ",(0,r.kt)("strong",{parentName:"p"},"root")," user on ",(0,r.kt)("strong",{parentName:"p"},"Instana")," server."),(0,r.kt)("p",null,"From the terminal window, type:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"stanctl agent apply\n")),(0,r.kt)("p",null,"You will see output similar to what's shown below."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(43706).Z,width:"463",height:"49"})),(0,r.kt)("p",null,"Within a short amount of time, the self-monitoring will begin monitoring:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The host operating system "),(0,r.kt)("li",{parentName:"ul"},"The kubernetes cluster"),(0,r.kt)("li",{parentName:"ul"},"Cassandra Database"),(0,r.kt)("li",{parentName:"ul"},"ClickHouse Database"),(0,r.kt)("li",{parentName:"ul"},"PostgreSQL"),(0,r.kt)("li",{parentName:"ul"},"Kafka"),(0,r.kt)("li",{parentName:"ul"},"Zookeeper"),(0,r.kt)("li",{parentName:"ul"},"JVMs"),(0,r.kt)("li",{parentName:"ul"},"And more...")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"39-summary"},"3.9: Summary"),(0,r.kt)("p",null,"In this portion of the lab, you have learned how to install a single server self-hosted ",(0,r.kt)("strong",{parentName:"p"},"Standard Edition"),"\nInstana server (backend). For a POC, we recommend either SaaS or the single server ",(0,r.kt)("strong",{parentName:"p"},"Standard Edition"),"\ninstallation of the Instana server. For small deployments, the ",(0,r.kt)("strong",{parentName:"p"},"single server Standard Edition")," is appropriate.\nAnd, for medium sized deployments, you can deploy a ",(0,r.kt)("strong",{parentName:"p"},"3 node Standard Edition")," Instana server.  In some cases,\n",(0,r.kt)("strong",{parentName:"p"},"Standard Edition")," may not meet your needs for scale/horizontal scale or HA/resiliency.  In those cases, deploy the ",(0,r.kt)("strong",{parentName:"p"},"Custom Edition")," of Instana."),(0,r.kt)("p",null,"You have also learned how to configure the SMTP settings and how to enable\nfeature flags."),(0,r.kt)("p",null,"You learned how to upgrade the ",(0,r.kt)("strong",{parentName:"p"},"Standard Edition")," Instana server."),(0,r.kt)("p",null,"Finally, you learned how to setup the self-monitoring capability that is part of ",(0,r.kt)("strong",{parentName:"p"},"Standard Edition")),(0,r.kt)("p",null,"You are now ready to learn how to install and configure an Instana Agent."),(0,r.kt)("hr",null))}m.isMDXComponent=!0},43023:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/accept-745c90f31f9c88376f565e2592e9f86b.png"},74951:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/acceptContinue-905ef1d90f3ee8b36a3985c16622400c.png"},72386:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/desktop-b209f768d6b2b00e207a7f6289bcf0fc.png"},6012:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/flagSuccess-1e8ff10e22f6c5bc89073c3cea357c55.png"},55340:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/flags-5bd4bd7ffb57441c851875af9575b87f.png"},59198:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/import-bc9b07067819067b843622cb7da8cd72.png"},34988:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/installFinished-499ccb9e140854797641eab7c99156d9.png"},45713:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/installPrompts-91f508b38c96cce688925d56e7b220c7.png"},71688:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/labEnvironment-8450ca73ab9658cd0155917327fdd446.png"},55772:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/login-ba5966c5df2fa30d3bb9f8f46b3d0c5b.png"},96141:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/pods-496ac7a6916a8b2cbd2b48f88b205796.png"},43706:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/self-monitoring-c60b51a02e90a41f2485accdad5a6b65.png"},3823:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/selfSigned-f5508480b8e904d841a7aa70bbd3c87c.png"},84905:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/studentVM-53cc1517fa7240ece546977e0ddc47ea.png"},57699:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/welcome-75bd407e3555d7815a637f2b37b2a03a.png"}}]);